<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/integration"
             xmlns:int-reactor="http://www.springframework.org/schema/integration/reactor"
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xmlns:beans="http://www.springframework.org/schema/beans"
             xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
             http://www.springframework.org/schema/integration http://www.springframework.org/schema/integration/spring-integration.xsd
             http://www.springframework.org/schema/integration/reactor http://www.springframework.org/schema/integration/reactor/spring-integration-reactor.xsd">

  <beans:bean id="env" class="reactor.core.Environment"/>

  <int-reactor:syslog-inbound-channel-adapter port="${port:5140}" env="env" channel="output"/>

  <beans:bean id="syslog" class="org.springframework.xd.integration.reactor.syslog.SyslogInboundChannelAdapter">
    <beans:constructor-arg ref="env"/>
    <beans:constructor-arg value="${port:5140}"/>
    <beans:property name="outputChannel" ref="output"/>
  </beans:bean>

  <beans:bean id="reactorProcessorDispatcher"
              class="org.springframework.xd.integration.reactor.dispatcher.ReactorProcessorMessageDispatcher"/>

  <beans:bean id="output" class="org.springframework.xd.integration.reactor.channel.ReactorPublishSubscribeChannel">
    <beans:constructor-arg ref="reactorProcessorDispatcher"/>
  </beans:bean>


</beans:beans>